<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project 1</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<body>
    <h1>Pokemon Data Analytics</h1>
    <h2>Max Coleman, Leo Decter, Sam Fuchs</h2>

    <svg class="viz"></svg>

    <script>

    data = d3.csv("data/pokedex.csv", d3.autoType)
    .then(data => {
        console.log("data", data);
        const badSubNames = [
            "Mega",
            "Alolan",
            "Galarian",
            "Therian Forme",
            "Resolute Forme",
        ];
        const badNames = [
            "Mega",
            "Alolan",
            "Galarian",
            "Deoxys Attack Forme",
            "Deoxys Defense Forme",
            "Deoxys Speed Forme",
            "Giratina Origin Forme",
            "Basculin Blue-Striped Form",
            "Therian Forme",
            "Black Kyurem",
            "White Kyurem",
            "Resolute Forme",
            "Meowstic Female",
            "Aegislash Shield Forme",
            "Pumpkaboo Small Size",
            "Pumpkaboo Large Size",
            "Pumpkaboo Super Size",
            "Gourgeist Small Size",
            "Gourgeist Large Size",
            "Gourgeist Super Size",
            "Zygarde 50% Forme",
            "Zygarde 10% Forme",
            "Own Tempo Rockruff",
            "Lycanroc Midday Form",
            "Lycanroc Midnight Form",
            "Wishiwashi Solo Form",
            "Minior Meteor Form",
            "Toxtricity Low Key Form",
            "Eiscue Noice Face",
            "Indeedee Male",
            "Morpeko Hangry Mode",
            "Eternatus Eternamax"
            "Partner Eevee"
            "Partner Pikachu"
        ]

      console.log("data", data);

      function total(generation){
        count = 0
        if (generation === 0){
          data.forEach(d => {
            if (d['name'].includes("Castform")){
              count += 1/4;
            }
            else if (d['name'].includes("Wormadam")){
              count+= 1/3;
            }
            else if (d['name'].includes("Rotom")){
              count += 1/6;
            }
            else if (d['name'].includes("Shaymin")){
              count += 1/2;
            }
            else if (d['name'].includes("Darmanitan")){
              count += 1/2;
            }
            else if (d['name'].includes("Meloetta")){
              count += 1/2;
            }
            else if (d['name'].includes("Hoopa")){
              count += 1/2;
            }
            else if (d['name'].includes("Oricorio")){
              count += 1/4;
            }
            else if (d['name'].includes("Necrozma")){
              count+= 1/4;
            }
            else if (d['name'].includes("Zacian")){
              count +=1/2;
            }
            else if (d['name'].includes("Zamazenta")){
              count += 1/2;
            }
            else {
              count += 1
            }
          })
        }else {
            data.forEach( d => {
              if (d['generation'] === generation) {
                if (d['name'].includes("Castform")){
                  count += 1/4;
                }
                else if (d['name'].includes("Wormadam")){
                  count+= 1/3;
                }
                else if (d['name'].includes("Rotom")){
                  count += 1/6;
                }
                else if (d['name'].includes("Shaymin")){
                  count += 1/2;
                }
                else if (d['name'].includes("Darmanitan")){
                  count += 1/2;
                }
                else if (d['name'].includes("Meloetta")){
                  count += 1/2;
                }
                else if (d['name'].includes("Hoopa")){
                  count += 1/2;
                }
                else if (d['name'].includes("Oricorio")){
                  count += 1/4;
                }
                else if (d['name'].includes("Necrozma")){
                  count+= 1/4;
                }
                else if (d['name'].includes("Zacian")){
                  count +=1/2;
                }
                else if (d['name'].includes("Zamazenta")){
                  count += 1/2;
                }
                else {
                  count += 1
                }
              }
            })
          }
          return count;
        }
        console.log("Total", total(0));
        console.log("gen 1", total(1));
      })



        function Total(generation){
            count = 0
            if (generation == 0) {
                data.forEach(d => {
                    if (d['name'].includes("Castform")) {
                        count += 1/4
                    }
                })
            }
        }

        let svg = d3.select("svg.viz")

        const HEIGHT = 800;
        const WIDTH  = 800;
        const margin = {'left':40, 'right':20, 'top':20, 'bottom':40 }
        const CHART_HEIGHT = HEIGHT - (margin.top + margin.bottom)
        const CHART_WIDTH = WIDTH - (margin.left + margin.right)

        let chart = svg.append('g')
            .attr('transform', `translate(${margin.left}, ${margin.top})`)

        let x_scale = d3.scaleLinear()
            .domain(d3.extent(data, d => d.attack))
            .range([0, CHART_WIDTH])
        let y_scale = d3.scaleLinear()
            .domain(d3.extent(data, d => d.defense))
            .range([CHART_HEIGHT, 0])

        let x_axis = d3.axisBottom().scale(x_scale)
        let y_axis = d3.axisLeft().scale(y_scale)
        let axes = chart.append('g')
        axes.append('g').call(x_axis)
            .attr('transform', `translate(0,${CHART_HEIGHT})`);
        axes.append('g').call(y_axis)

        console.log(x_scale.domain())

        let els = chart.selectAll('circle').data(data)
        els.exit().remove()
        els.enter()
            .append('circle')
            .attr('r', 4)
            .merge(els)
            .attr('cx', d => x_scale(d.attack))
            .attr('cy', d => y_scale(d.defense))
            .attr('fill', 'steelblue')
    });

    </script>
    <script>
    </script>


</body>
</html>
